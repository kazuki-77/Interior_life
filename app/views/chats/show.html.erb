<div class="chat-detail">
  <div class="container chat-container">
    <div class="row d-flex justify-content-center">
      <div class="col-8 chats-row">
        <h2 class="p-3 text-center">〜　<%= @user.name %><span class="text-size"> さんとのメッセージ</span>　〜</h2>
        <table class="table" id="ajax-message">
          <% @chats.each do |chat| %>
            <% if chat.user_id == current_user.id %>
              <%= render 'message', chat: chat %>
            <% else %>
              <tbody style="border:none;">
                <tr style="border:none">
                  <th class="text-align-center" style="border:none">
                    <%= attachment_image_tag chat.user, :profile_image, :fill, 60, 60, fallback: "no-image.jpg", class: "mt-3 rounded-circle" %><br>
                    <p><span class="user-name"><%= chat.user.name %></span>
                    <%= chat.created_at.strftime('%Y/%m/%d %H:%M:%S') %></p>
                    <p class="message" style="text-align:left border:none;"><%= chat.message %></p>
                  </th>
                </tr>
              </tbody>
            <% end %>
          <% end %>
        </table>
        <hr>
        <div id="chat-form" class="text-right chat_form form-group">
          <%= render 'chats/form', chat: @chat %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// 遷移後に最新のメッセージ（最下部）に移動するように設定
  $('.chats-row').scrollTop($('.chats-row')[0].scrollHeight);
</script>